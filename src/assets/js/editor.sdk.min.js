var LadiPageFormEditorV2 = LadiPageFormEditorV2 || function () {};
(LadiPageFormEditorV2.prototype.init = function () {
  (this.prefix = 'form-account-editor-sdk'),
    (this.filename = '/' + this.prefix + '.html'),
    (this.id = this.prefix + '-' + Date.now()),
    (this.isEventMessage = !1),
    (this.callbackLoaded = null),
    (this.callbackClose = null),
    (this.callbackDone = null),
    (this.callbackIFrameLoaded = []);
}),
  (LadiPageFormEditorV2.prototype.getDoc = function () {
    return document.getElementById(this.id);
  }),
  (LadiPageFormEditorV2.prototype.loadFrame = function (e) {
    var i = this;
    if (!(i.callbackIFrameLoaded.length > 0)) {
      var a = i.getDoc();
      if (null == a) {
        if (
          (this.callbackIFrameLoaded.push(e),
          'function' == typeof i.showLoadingFunction && i.showLoadingFunction(),
          ((a = document.createElement('iframe')).id = i.id),
          a.setAttribute(
            'style',
            'z-index: 900000070; overflow: hidden; border: none; width: 100%; height: 100%; position: fixed; top: 0; left: 0;',
          ),
          (a.src =
            i.base_url +
            i.filename +
            '?v=' +
            (i.version ? i.version : Date.now())),
          document.body.appendChild(a),
          i.isEventMessage)
        )
          return;
        var t = function (e) {
          (a = i.getDoc()).style.setProperty('display', 'none'),
            a.parentElement.removeChild(a),
            'function' == typeof i.callbackClose && i.callbackClose(),
            e.is_done &&
              'function' == typeof i.callbackDone &&
              i.callbackDone(e.item);
        };
        (i.isEventMessage = !0),
          window.addEventListener('message', function (e) {
            try {
              var o = JSON.parse(e.data);
              if (o.prefix != i.prefix) return;
              if (
                ('call_function_name' == o.action &&
                  (o.data instanceof Object &&
                    o.data.is_close &&
                    t({ is_done: !1 }),
                  'function' == typeof i[o.name] && i[o.name](o.data)),
                'show_loading' == o.action &&
                  'function' == typeof i.showLoadingFunction &&
                  i.showLoadingFunction(),
                'hide_loading' == o.action &&
                  'function' == typeof i.hideLoadingFunction &&
                  i.hideLoadingFunction(),
                'show_message' == o.action &&
                  'function' == typeof i.showMessage &&
                  i.showMessage(o.message),
                'loaded' == o.action)
              ) {
                'function' == typeof i.hideLoadingFunction &&
                  i.hideLoadingFunction();
                var n = {
                  prefix: i.prefix,
                  action: 'all_data',
                  data: JSON.stringify(i),
                };
                for (
                  i.postMessage(JSON.stringify(n), '*'), a = i.getDoc();
                  i.callbackIFrameLoaded.length > 0;

                ) {
                  i.callbackIFrameLoaded.shift()(a);
                }
                'function' == typeof i.callbackLoaded && i.callbackLoaded();
              }
              'close' == o.action && t(o);
            } catch (e) {}
          });
      } else
        'function' == typeof e &&
          ((a = i.getDoc()).style.removeProperty('display'), e(a));
    }
  }),
  (LadiPageFormEditorV2.prototype.postMessage = function (e, i) {
    this.getDoc().contentWindow.postMessage(e, i);
  }),
  (LadiPageFormEditorV2.prototype.createFormConfig = function (e, i, a, t, o) {
    var n = this;
    n.loadFrame(function (a) {
      var t = {
        prefix: n.prefix,
        action: 'create_form_config',
        options: i,
        lang: e,
      };
      n.postMessage(JSON.stringify(t), '*');
    }),
      (n.callbackLoaded = a),
      (n.callbackClose = t),
      (n.callbackDone = o);
  }),
  (LadiPageFormEditorV2.prototype.editFormConfig = function (e, i, a, t, o) {
    var n = this;
    n.loadFrame(function (a) {
      var t = { prefix: n.prefix, action: 'edit_form_config', lang: i, id: e };
      n.postMessage(JSON.stringify(t), '*');
    }),
      (n.callbackLoaded = a),
      (n.callbackClose = t),
      (n.callbackDone = o);
  }),
  (LadiPageFormEditorV2.prototype.createFormAccount = function (e, i, a, t, o) {
    var n = this;
    n.loadFrame(function (a) {
      var t = {
        prefix: n.prefix,
        action: 'create_form_account',
        lang: e,
        options: i,
      };
      n.postMessage(JSON.stringify(t), '*');
    }),
      (n.callbackLoaded = a),
      (n.callbackClose = t),
      (n.callbackDone = o);
  }),
  (LadiPageFormEditorV2.prototype.editFormAccount = function (e, i, a, t, o) {
    var n = this;
    n.loadFrame(function (a) {
      var t = { prefix: n.prefix, action: 'edit_form_account', lang: i, id: e };
      n.postMessage(JSON.stringify(t), '*');
    }),
      (n.callbackLoaded = a),
      (n.callbackClose = t),
      (n.callbackDone = o);
  }),
  (LadiPageFormEditorV2.prototype.showCreateFormConfig = function (e) {
    var i = function () {
        var a = document.getElementById('button-form-config-create');
        if (null == a || void 0 == a) return setTimeout(i, 1);
        a.setAttribute('data-json', encodeURIComponent(JSON.stringify(e))),
          a.click();
      },
      a = function () {
        var e = document.getElementById('link-form-config');
        if (null == e || void 0 == e) return setTimeout(a, 1);
        e.click(), i();
      };
    a();
  });
var LadiPageFormEditor = LadiPageFormEditor || new LadiPageFormEditorV2();
LadiPageFormEditor.init();
var LadiPagePopupXEditorV2 = LadiPagePopupXEditorV2 || function () {};
(LadiPagePopupXEditorV2.prototype.init = function () {
  (this.prefix = 'popupx-editor-sdk'),
    (this.filename = '/' + this.prefix + '.html'),
    (this.id = this.prefix + '-' + Date.now()),
    (this.isEventMessage = !1),
    (this.callbackLoaded = null),
    (this.callbackClose = null),
    (this.callbackDone = null),
    (this.callbackIFrameLoaded = []);
}),
  (LadiPagePopupXEditorV2.prototype.getDoc = function () {
    return document.getElementById(this.id);
  }),
  (LadiPagePopupXEditorV2.prototype.loadFrame = function (e) {
    var i = this;
    if (!(i.callbackIFrameLoaded.length > 0)) {
      var a = i.getDoc();
      if (null == a) {
        if (
          (this.callbackIFrameLoaded.push(e),
          'function' == typeof i.showLoadingFunction && i.showLoadingFunction(),
          ((a = document.createElement('iframe')).id = i.id),
          a.setAttribute(
            'style',
            'z-index: 900000070; overflow: hidden; border: none; width: 100%; height: 100%; position: fixed; top: 0; left: 0;',
          ),
          (a.src =
            i.base_url +
            i.filename +
            '?v=' +
            (i.version ? i.version : Date.now())),
          document.body.appendChild(a),
          i.isEventMessage)
        )
          return;
        (i.isEventMessage = !0),
          window.addEventListener('message', function (e) {
            try {
              var t = JSON.parse(e.data);
              if (t.prefix != i.prefix) return;
              if (
                ('show_loading' == t.action &&
                  'function' == typeof i.showLoadingFunction &&
                  i.showLoadingFunction(),
                'hide_loading' == t.action &&
                  'function' == typeof i.hideLoadingFunction &&
                  i.hideLoadingFunction(),
                'show_message' == t.action &&
                  'function' == typeof i.showMessage &&
                  i.showMessage(t.message),
                'confirm_message' == t.action &&
                  'function' == typeof i.confirmMessage &&
                  i.confirmMessage(
                    t.message,
                    function () {
                      var e = {
                        prefix: i.prefix,
                        action: 'callback_confirm_message',
                        data: !0,
                      };
                      i.postMessage(JSON.stringify(e), '*');
                    },
                    function () {
                      var e = {
                        prefix: i.prefix,
                        action: 'callback_confirm_message',
                        data: !1,
                      };
                      i.postMessage(JSON.stringify(e), '*');
                    },
                  ),
                'loaded' == t.action)
              ) {
                'function' == typeof i.hideLoadingFunction &&
                  i.hideLoadingFunction();
                var o = {
                  prefix: i.prefix,
                  action: 'all_data',
                  data: JSON.stringify(i),
                };
                for (
                  i.postMessage(JSON.stringify(o), '*'), a = i.getDoc();
                  i.callbackIFrameLoaded.length > 0;

                ) {
                  i.callbackIFrameLoaded.shift()(a);
                }
                'function' == typeof i.callbackLoaded && i.callbackLoaded();
              }
              'close' == t.action &&
                ((a = i.getDoc()).style.setProperty('display', 'none'),
                a.parentElement.removeChild(a),
                'function' == typeof i.callbackClose && i.callbackClose(),
                t.is_done &&
                  'function' == typeof i.callbackDone &&
                  i.callbackDone(t.item));
            } catch (e) {}
          });
      } else
        'function' == typeof e &&
          ((a = i.getDoc()).style.removeProperty('display'), e(a));
    }
  }),
  (LadiPagePopupXEditorV2.prototype.postMessage = function (e, i) {
    this.getDoc().contentWindow.postMessage(e, i);
  }),
  (LadiPagePopupXEditorV2.prototype.editConfig = function (e, i, a, t, o) {
    var n = this;
    n.loadFrame(function (a) {
      var t = { prefix: n.prefix, action: 'edit_config', lang: i, id: e };
      n.postMessage(JSON.stringify(t), '*');
    }),
      (n.callbackLoaded = a),
      (n.callbackClose = t),
      (n.callbackDone = o);
  });
var LadiPagePopupXEditor = LadiPagePopupXEditor || new LadiPagePopupXEditorV2();
LadiPagePopupXEditor.init();
var LadiPageDynamicEditorV2 = LadiPageDynamicEditorV2 || function () {};
(LadiPageDynamicEditorV2.prototype.init = function () {
  (this.prefix = 'dynamic-editor-sdk'),
    (this.filename = '/' + this.prefix + '.html'),
    (this.id = this.prefix + '-' + Date.now()),
    (this.isEventMessage = !1),
    (this.callbackLoaded = null),
    (this.callbackClose = null),
    (this.callbackDone = null),
    (this.callbackIFrameLoaded = []);
}),
  (LadiPageDynamicEditorV2.prototype.getDoc = function () {
    return document.getElementById(this.id);
  }),
  (LadiPageDynamicEditorV2.prototype.loadFrame = function (e) {
    var i = this;
    if (!(i.callbackIFrameLoaded.length > 0)) {
      var a = i.getDoc();
      if (null == a) {
        if (
          (this.callbackIFrameLoaded.push(e),
          'function' == typeof i.showLoadingFunction && i.showLoadingFunction(),
          ((a = document.createElement('iframe')).id = i.id),
          a.setAttribute(
            'style',
            'z-index: 900000070; overflow: hidden; border: none; width: 100%; height: 100%; position: fixed; top: 0; left: 0;',
          ),
          (a.src =
            i.base_url +
            i.filename +
            '?v=' +
            (i.version ? i.version : Date.now())),
          document.body.appendChild(a),
          i.isEventMessage)
        )
          return;
        (i.isEventMessage = !0),
          window.addEventListener('message', function (e) {
            try {
              var t = JSON.parse(e.data);
              if (t.prefix != i.prefix) return;
              if (
                ('show_loading' == t.action &&
                  'function' == typeof i.showLoadingFunction &&
                  i.showLoadingFunction(),
                'hide_loading' == t.action &&
                  'function' == typeof i.hideLoadingFunction &&
                  i.hideLoadingFunction(),
                'show_message' == t.action &&
                  'function' == typeof i.showMessage &&
                  i.showMessage(t.message),
                'confirm_message' == t.action &&
                  'function' == typeof i.confirmMessage &&
                  i.confirmMessage(
                    t.message,
                    function () {
                      var e = {
                        prefix: i.prefix,
                        action: 'callback_confirm_message',
                        data: !0,
                      };
                      i.postMessage(JSON.stringify(e), '*');
                    },
                    function () {
                      var e = {
                        prefix: i.prefix,
                        action: 'callback_confirm_message',
                        data: !1,
                      };
                      i.postMessage(JSON.stringify(e), '*');
                    },
                  ),
                'loaded' == t.action)
              ) {
                'function' == typeof i.hideLoadingFunction &&
                  i.hideLoadingFunction();
                var o = {
                  prefix: i.prefix,
                  action: 'all_data',
                  data: JSON.stringify(i),
                };
                for (
                  i.postMessage(JSON.stringify(o), '*'), a = i.getDoc();
                  i.callbackIFrameLoaded.length > 0;

                ) {
                  i.callbackIFrameLoaded.shift()(a);
                }
                'function' == typeof i.callbackLoaded && i.callbackLoaded();
              }
              'close' == t.action &&
                ((a = i.getDoc()).style.setProperty('display', 'none'),
                a.parentElement.removeChild(a),
                'function' == typeof i.callbackClose && i.callbackClose(),
                t.is_done &&
                  'function' == typeof i.callbackDone &&
                  i.callbackDone(t.item));
            } catch (e) {}
          });
      } else
        'function' == typeof e &&
          ((a = i.getDoc()).style.removeProperty('display'), e(a));
    }
  }),
  (LadiPageDynamicEditorV2.prototype.postMessage = function (e, i) {
    this.getDoc().contentWindow.postMessage(e, i);
  }),
  (LadiPageDynamicEditorV2.prototype.create = function (e, i, a, t) {
    var o = this;
    o.loadFrame(function (i) {
      var a = { prefix: o.prefix, action: 'create', lang: e };
      o.postMessage(JSON.stringify(a), '*');
    }),
      (o.callbackLoaded = i),
      (o.callbackClose = a),
      (o.callbackDone = t);
  }),
  (LadiPageDynamicEditorV2.prototype.edit = function (e, i, a, t, o) {
    var n = this;
    n.loadFrame(function (a) {
      var t = { prefix: n.prefix, action: 'edit', lang: i, item: e };
      n.postMessage(JSON.stringify(t), '*');
    }),
      (n.callbackLoaded = a),
      (n.callbackClose = t),
      (n.callbackDone = o);
  }),
  (LadiPageDynamicEditorV2.prototype.detail = function (e, i, a, t, o) {
    var n = this;
    n.loadFrame(function (a) {
      var t = { prefix: n.prefix, action: 'detail', lang: i, item: e };
      n.postMessage(JSON.stringify(t), '*');
    }),
      (n.callbackLoaded = a),
      (n.callbackClose = t),
      (n.callbackDone = o);
  }),
  (LadiPageDynamicEditorV2.prototype.duplicate = function (e, i, a, t, o) {
    var n = this;
    n.loadFrame(function (a) {
      var t = { prefix: n.prefix, action: 'duplicate', lang: i, item: e };
      n.postMessage(JSON.stringify(t), '*');
    }),
      (n.callbackLoaded = a),
      (n.callbackClose = t),
      (n.callbackDone = o);
  });
var LadiPageDynamicEditor =
  LadiPageDynamicEditor || new LadiPageDynamicEditorV2();
LadiPageDynamicEditor.init();
var LadiPageTrackingEditorV2 = LadiPageTrackingEditorV2 || function () {};
(LadiPageTrackingEditorV2.prototype.init = function () {
  (this.prefix = 'tracking-editor-sdk'),
    (this.filename = '/' + this.prefix + '.html'),
    (this.id = this.prefix + '-' + Date.now()),
    (this.isEventMessage = !1),
    (this.callbackLoaded = null),
    (this.callbackClose = null),
    (this.callbackDone = null),
    (this.callbackIFrameLoaded = []);
}),
  (LadiPageTrackingEditorV2.prototype.getDoc = function () {
    return document.getElementById(this.id);
  }),
  (LadiPageTrackingEditorV2.prototype.loadFrame = function (e) {
    var i = this;
    if (!(i.callbackIFrameLoaded.length > 0)) {
      var a = i.getDoc();
      if (null == a) {
        if (
          (this.callbackIFrameLoaded.push(e),
          'function' == typeof i.showLoadingFunction && i.showLoadingFunction(),
          ((a = document.createElement('iframe')).id = i.id),
          a.setAttribute(
            'style',
            'z-index: 900000070; overflow: hidden; border: none; width: 100%; height: 100%; position: fixed; top: 0; left: 0;',
          ),
          (a.src =
            i.base_url +
            i.filename +
            '?v=' +
            (i.version ? i.version : Date.now())),
          document.body.appendChild(a),
          i.isEventMessage)
        )
          return;
        (i.isEventMessage = !0),
          window.addEventListener('message', function (e) {
            try {
              var t = JSON.parse(e.data);
              if (t.prefix != i.prefix) return;
              if (
                ('show_loading' == t.action &&
                  'function' == typeof i.showLoadingFunction &&
                  i.showLoadingFunction(),
                'hide_loading' == t.action &&
                  'function' == typeof i.hideLoadingFunction &&
                  i.hideLoadingFunction(),
                'show_message' == t.action &&
                  'function' == typeof i.showMessage &&
                  i.showMessage(t.message),
                'loaded' == t.action)
              ) {
                'function' == typeof i.hideLoadingFunction &&
                  i.hideLoadingFunction();
                var o = {
                  prefix: i.prefix,
                  action: 'all_data',
                  data: JSON.stringify(i),
                };
                for (
                  i.postMessage(JSON.stringify(o), '*'), a = i.getDoc();
                  i.callbackIFrameLoaded.length > 0;

                ) {
                  i.callbackIFrameLoaded.shift()(a);
                }
                'function' == typeof i.callbackLoaded && i.callbackLoaded();
              }
              'close' == t.action &&
                ((a = i.getDoc()).style.setProperty('display', 'none'),
                a.parentElement.removeChild(a),
                'function' == typeof i.callbackClose && i.callbackClose(),
                t.is_done &&
                  'function' == typeof i.callbackDone &&
                  i.callbackDone(t.item));
            } catch (e) {}
          });
      } else
        'function' == typeof e &&
          ((a = i.getDoc()).style.removeProperty('display'), e(a));
    }
  }),
  (LadiPageTrackingEditorV2.prototype.postMessage = function (e, i) {
    this.getDoc().contentWindow.postMessage(e, i);
  }),
  (LadiPageTrackingEditorV2.prototype.create = function (e, i, a, t) {
    var o = this;
    o.loadFrame(function (i) {
      var a = { prefix: o.prefix, action: 'create_tracking', lang: e };
      o.postMessage(JSON.stringify(a), '*');
    }),
      (o.callbackLoaded = i),
      (o.callbackClose = a),
      (o.callbackDone = t);
  }),
  (LadiPageTrackingEditorV2.prototype.edit = function (e, i, a, t, o) {
    var n = this;
    n.loadFrame(function (a) {
      var t = { prefix: n.prefix, action: 'edit_tracking', lang: i, id: e };
      n.postMessage(JSON.stringify(t), '*');
    }),
      (n.callbackLoaded = a),
      (n.callbackClose = t),
      (n.callbackDone = o);
  });
var LadiPageTrackingEditor =
  LadiPageTrackingEditor || new LadiPageTrackingEditorV2();
LadiPageTrackingEditor.init();
var LadiPageDomainEditorV2 = LadiPageDomainEditorV2 || function () {};
(LadiPageDomainEditorV2.prototype.init = function () {
  var e = this;
  if (
    ((this.prefix = 'domain-editor-sdk'),
    (this.addnew_domain_pathname = '/domain'),
    (this.addnew_domain_param_key = 'addnew'),
    (this.addnew_domain_param_value = 'true'),
    (this.id = this.prefix + '-' + Date.now()),
    (this.callback = null),
    (this.isLoading = !1),
    null == this.base_url || void 0 == this.base_url)
  )
    return setTimeout(function () {
      e.init();
    }, 100);
  var i = null;
  if (this.checkParentBuilderManager(!0)) {
    var a = '';
    a +=
      [
        '.announcekit-frame-wrapper',
        '.announcekit-widget-floating-badge',
        '.announcekit-widget-iframe-backdrop',
        '#ladichat',
        '#sidebar-left',
        '#topbar-top',
        '#document-content-domain',
        '#document-content-domain-welcome',
      ].join(', ') + ' {display: none !important;}';
    var t = document.createElement('style');
    (t.type = 'text/css'),
      (t.innerHTML = a),
      document.head.appendChild(t),
      (i = function () {
        var a = document.getElementById('button-domain-create');
        if (null == a || void 0 == a) return setTimeout(i, 1);
        (window.parent.LadiPageDomainEditor.isLoading = !1),
          'function' ==
            typeof window.parent.LadiPageDomainEditor.hideLoadingFunction &&
            window.parent.LadiPageDomainEditor.hideLoadingFunction();
        var t = window.parent.document.getElementById(
          window.parent.LadiPageDomainEditor.id,
        );
        null != t && void 0 != t && t.classList.remove('opacity-0'), a.click();
        var o = document.getElementsByClassName(
          'modal-domain-builder-iframe',
        )[0];
        o.classList.add('sdk-backdrop'),
          o.addEventListener('click', function (i) {
            if (LadiUI.isClickOneElement)
              if (i.target.classList.contains('sdk-backdrop'))
                i.stopPropagation();
              else {
                var a = e.findAncestor(
                  i.target,
                  'modal-content-builder-iframe',
                );
                if (null == a || void 0 == a) e.closeIframe();
                else {
                  var t = e.findAncestor(
                    i.target,
                    'modal-close-builder-iframe',
                  );
                  null != t && void 0 != t && e.closeIframe();
                }
              }
          });
      })();
  } else
    this.checkParentBuilderManager(!1) &&
      (i = function () {
        var e = document.getElementsByClassName(
          'modal-domain-builder-iframe',
        )[0];
        if (null == e || void 0 == e) return setTimeout(i, 1);
        e.classList.add('sdk-backdrop'),
          e.addEventListener('click', function (e) {
            LadiUI.isClickOneElement &&
              e.target.classList.contains('sdk-backdrop') &&
              e.stopPropagation();
          });
      })();
}),
  (LadiPageDomainEditorV2.prototype.closeIframe = function () {
    var e = window.parent.document.getElementById(
      window.parent.LadiPageDomainEditor.id,
    );
    null != e && void 0 != e && e.parentElement.removeChild(e);
  }),
  (LadiPageDomainEditorV2.prototype.runCallbackDone = function (e) {
    this.checkParentBuilderManager(!0) &&
      ('function' == typeof window.parent.LadiPageDomainEditor.callback &&
        window.parent.LadiPageDomainEditor.callback(),
      e && setTimeout(this.closeIframe, 100));
  }),
  (LadiPageDomainEditorV2.prototype.checkParentBuilderManager = function (e) {
    var i = !1;
    try {
      var a = new window.URLSearchParams(window.location.search);
      if (
        (i =
          window.parent &&
          null != window.parent.document &&
          void 0 != window.parent.document &&
          null != window.parent.LadiPageDomainEditor &&
          void 0 != window.parent.LadiPageDomainEditor &&
          window.location.origin == this.base_url)
      ) {
        var t =
          null != window.parent.LadiPageBuilder &&
          void 0 != window.parent.LadiPageBuilder;
        (i = window.location.pathname == this.addnew_domain_pathname) &&
          e &&
          (i =
            t &&
            a.get(this.addnew_domain_param_key) ==
              this.addnew_domain_param_value);
      }
    } catch (e) {}
    return i;
  }),
  (LadiPageDomainEditorV2.prototype.findAncestor = function (e, i) {
    i = i instanceof Array ? i : [i];
    for (
      var a = function (e, i) {
          if (
            null == e ||
            void 0 == e ||
            null == e.classList ||
            void 0 == e.classList ||
            !e.classList.contains(i)
          )
            for (; (e = e.parentElement) && !e.classList.contains(i); );
          return e;
        },
        t = 0;
      t < i.length && null != (e = a(e, i[t])) && void 0 != e;
      t++
    );
    return e;
  }),
  (LadiPageDomainEditorV2.prototype.create = function (e) {
    if (!this.isLoading) {
      (this.isLoading = !0),
        'function' == typeof this.showLoadingFunction &&
          this.showLoadingFunction();
      var i = document.createElement('iframe');
      (i.src =
        this.base_url +
        this.addnew_domain_pathname +
        '?' +
        this.addnew_domain_param_key +
        '=' +
        this.addnew_domain_param_value),
        (i.id = this.id),
        i.classList.add('opacity-0'),
        i.style.setProperty('position', 'fixed'),
        i.style.setProperty('top', '0'),
        i.style.setProperty('left', '0'),
        i.style.setProperty('width', '100vw'),
        i.style.setProperty('height', '100vh'),
        i.style.setProperty('z-index', '900000090'),
        document.body.appendChild(i),
        (this.callback = e);
    }
  });
var LadiPageDomainEditor = LadiPageDomainEditor || new LadiPageDomainEditorV2();
LadiPageDomainEditor.init();
var LadiPageFlowEditorV2 = LadiPageFlowEditorV2 || function () {};
(LadiPageFlowEditorV2.prototype.init = function () {
  var e = this,
    i = null;
  if (!this.windowEvent) {
    (this.windowEvent = !0),
      (i = new window.URLSearchParams(window.location.search));
    var a = null;
    window.LadiPageConfig && window.LadiPageConfig.is_builder
      ? ((this.isIFrameBuilder = !1),
        window.addEventListener('message', function (i) {
          try {
            var t = JSON.parse(i.data);
            t.ladiflow_load_data &&
              e
                .getDoc()
                .contentWindow.postMessage(
                  JSON.stringify({
                    ladiflow_set_data: !0,
                    isIFrameBuilder:
                      null != window.LadiPageBuilder &&
                      void 0 != window.LadiPageBuilder,
                  }),
                  '*',
                ),
              t.ladiflow_run_callback &&
                'function' == typeof e.callback &&
                e.callback(),
              t.ladiflow_run_callback_null_trigger &&
                ('function' == typeof e.callback_null_trigger &&
                  e.callback_null_trigger(t.message),
                null != (a = document.getElementById(e.id)) &&
                  void 0 != a &&
                  a.parentElement.removeChild(a)),
              t.ladiflow_close_iframe &&
                null != (a = document.getElementById(e.id)) &&
                void 0 != a &&
                a.parentElement.removeChild(a),
              t.ladiflow_iframe_loaded &&
                ((e.isLoading = !1),
                'function' == typeof e.hideLoadingFunction &&
                  e.hideLoadingFunction(),
                null != (a = document.getElementById(e.id)) &&
                  void 0 != a &&
                  a.classList.remove('opacity-0'));
          } catch (e) {}
        }))
      : ((this.isIFrameBuilder = !0),
        (this.isIframeParent = '1' == i.get('iframe')),
        window.addEventListener('message', function (i) {
          try {
            var a = JSON.parse(i.data);
            a.ladiflow_set_data &&
              ((e.isIFrameBuilder = a.isIFrameBuilder),
              (e.isIframeParent = !0));
          } catch (e) {}
        }),
        window.parent.postMessage(
          JSON.stringify({ ladiflow_load_data: !0 }),
          '*',
        ));
  }
  if (
    ((this.prefix = 'flow-editor-sdk'),
    (this.id = this.prefix + '-' + Date.now()),
    (this.callback = null),
    (this.callback_null_trigger = null),
    (this.isLoading = !1),
    (this.addnew_trigger_pathname = '/triggers'),
    (this.addnew_trigger_param_key = 'mode'),
    (this.addnew_trigger_param_value = 'add'),
    (this.edit_trigger_pathname = '/triggers'),
    (this.edit_trigger_param_key = 'mode'),
    (this.edit_trigger_param_value = 'edit'),
    (this.edit_trigger_param_trigger_id = 'trigger_id'),
    (this.addnew_fanpage_pathname = '/integrations'),
    (this.addnew_fanpage_param_key = 'mode'),
    (this.addnew_fanpage_param_value = 'add'),
    (this.addnew_fanpage_param2_key = 'type'),
    (this.addnew_fanpage_param2_value = 'fb_page'),
    (this.param_key_store_id = 'store_id'),
    null == this.isIFrameBuilder || void 0 == this.isIFrameBuilder)
  )
    return setTimeout(function () {
      e.init(!1);
    }, 100);
  if (null == this.base_url || void 0 == this.base_url)
    return setTimeout(function () {
      e.init(!1);
    }, 100);
  var t = null;
  if (this.checkParentLadiFlow(!0)) {
    if (
      ((i = new window.URLSearchParams(window.location.search)),
      this.isIframeParent)
    ) {
      var o = '';
      (o +=
        [
          '#ladichat',
          '#sidebar-left',
          '#topbar-top',
          '#document-content-trigger',
          '#document-content-integration, .modal-back-builder-iframe',
        ].join(', ') + ' {display: none !important;}'),
        (o += '#modal-create-integration {opacity: 0 !important;}');
      var n = document.createElement('style');
      (n.type = 'text/css'), (n.innerHTML = o), document.head.appendChild(n);
    }
    (t = function () {
      var a = document.querySelector(
        '#button-trigger-create, #button-integration-create',
      );
      if (null == a || void 0 == a) return setTimeout(t, 1);
      var o = function () {
        if (
          (window.parent.postMessage(
            JSON.stringify({ ladiflow_iframe_loaded: !0 }),
            '*',
          ),
          'button-trigger-create' == a.id &&
            i.get(e.edit_trigger_param_key) == e.edit_trigger_param_value)
        ) {
          var t = i.get(e.edit_trigger_param_trigger_id);
          if (null != t && void 0 != t) {
            var o = document.getElementById('button-trigger-edit');
            null != o &&
              void 0 != o &&
              (o.setAttribute('data-id', t),
              o.style.setProperty('position', 'fixed'),
              o.style.setProperty('top', '-100000px'),
              o.style.setProperty('left', '-100000px'),
              o.style.setProperty('opacity', '0'),
              o.style.setProperty('display', 'block', 'important'),
              (a = o));
          }
        }
        a.click();
        var n = document.getElementById('topbar-top');
        null != (n = n.parentElement) &&
          void 0 != n &&
          n.parentElement.addEventListener('click', function (i) {
            var a = e.findAncestor(i.target, 'modal-content-builder-iframe');
            if (null == a || void 0 == a) e.closeIframe();
            else {
              var t = e.findAncestor(i.target, 'modal-close-builder-iframe');
              null != t && void 0 != t && e.closeIframe();
            }
          });
      };
      if ('button-integration-create' != a.id) o();
      else {
        a.click();
        var n = function () {
          if (
            null ==
              (a = document.querySelector(
                '#modal-create-integration .builder-form-account-item[data-type="FB_PAGE"]',
              )) ||
            void 0 == a
          )
            return setTimeout(n, 1);
          o();
        };
        n();
      }
    })();
  }
}),
  (LadiPageFlowEditorV2.prototype.getDoc = function () {
    return document.getElementById(this.id);
  }),
  (LadiPageFlowEditorV2.prototype.closeIframe = function () {
    window.parent.postMessage(
      JSON.stringify({ ladiflow_close_iframe: !0 }),
      '*',
    );
  }),
  (LadiPageFlowEditorV2.prototype.runCallbackDone = function (e) {
    this.checkParentLadiFlow(!0) &&
      (window.parent.postMessage(
        JSON.stringify({ ladiflow_run_callback: !0 }),
        '*',
      ),
      e && setTimeout(this.closeIframe, 100));
  }),
  (LadiPageFlowEditorV2.prototype.runCallbackNullTrigger = function (e) {
    this.checkParentLadiFlow(!0) &&
      window.parent.postMessage(
        JSON.stringify({ ladiflow_run_callback_null_trigger: !0, message: e }),
        '*',
      );
  }),
  (LadiPageFlowEditorV2.prototype.checkParentLadiFlow = function (e) {
    var i = !1;
    try {
      var a = new window.URLSearchParams(window.location.search);
      if ((i = window.location.origin == this.base_url)) {
        var t = this.isIFrameBuilder;
        if (
          ((i = window.location.pathname == this.addnew_trigger_pathname) &&
            e &&
            (i =
              t &&
              a.get(this.addnew_trigger_param_key) ==
                this.addnew_trigger_param_value),
          !i &&
            (i = window.location.pathname == this.edit_trigger_pathname) &&
            e)
        ) {
          var o = a.get(this.edit_trigger_param_trigger_id);
          i =
            t &&
            a.get(this.edit_trigger_param_key) ==
              this.edit_trigger_param_value &&
            null != o &&
            void 0 != o;
        }
        i ||
          ((i = window.location.pathname == this.addnew_fanpage_pathname) &&
            e &&
            (i =
              t &&
              a.get(this.addnew_fanpage_param_key) ==
                this.addnew_fanpage_param_value &&
              a.get(this.addnew_fanpage_param2_key) ==
                this.addnew_fanpage_param2_value));
      }
    } catch (e) {}
    return i;
  }),
  (LadiPageFlowEditorV2.prototype.findAncestor = function (e, i) {
    i = i instanceof Array ? i : [i];
    for (
      var a = function (e, i) {
          if (
            null == e ||
            void 0 == e ||
            null == e.classList ||
            void 0 == e.classList ||
            !e.classList.contains(i)
          )
            for (; (e = e.parentElement) && !e.classList.contains(i); );
          return e;
        },
        t = 0;
      t < i.length && null != (e = a(e, i[t])) && void 0 != e;
      t++
    );
    return e;
  }),
  (LadiPageFlowEditorV2.prototype.editFlow = function (e) {
    var i =
      this.base_url +
      '/triggers/{0}/flow/{1}?' +
      this.param_key_store_id +
      '={2}';
    (i = i.format(e.id, e.flow_id, e.store_id)), window.open(i, '_blank');
  }),
  (LadiPageFlowEditorV2.prototype.editTrigger = function (e, i, a) {
    var t =
      this.base_url +
      this.edit_trigger_pathname +
      '?' +
      this.edit_trigger_param_key +
      '=' +
      this.edit_trigger_param_value +
      '&' +
      this.edit_trigger_param_trigger_id +
      '=' +
      e.id +
      '&' +
      this.param_key_store_id +
      '=' +
      e.store_id;
    window.open(t, '_blank');
  }),
  (LadiPageFlowEditorV2.prototype.newFanpage = function (e, i) {
    var a =
      this.base_url +
      this.addnew_fanpage_pathname +
      '?' +
      this.addnew_fanpage_param_key +
      '=' +
      this.addnew_fanpage_param_value +
      '&' +
      this.addnew_fanpage_param2_key +
      '=' +
      this.addnew_fanpage_param2_value +
      '&' +
      this.param_key_store_id +
      '=' +
      e;
    if (((a += '&iframe=1'), !this.isLoading)) {
      (this.isLoading = !0),
        'function' == typeof this.showLoadingFunction &&
          this.showLoadingFunction();
      var t = document.createElement('iframe');
      (t.src = a),
        (t.id = this.id),
        t.classList.add('opacity-0'),
        t.style.setProperty('position', 'fixed'),
        t.style.setProperty('top', '0'),
        t.style.setProperty('left', '0'),
        t.style.setProperty('width', '100vw'),
        t.style.setProperty('height', '100vh'),
        t.style.setProperty('z-index', '900000090'),
        document.body.appendChild(t),
        (this.callback = i),
        (this.callback_null_trigger = null);
    }
  }),
  (LadiPageFlowEditorV2.prototype.newTrigger = function (e, i) {
    var a =
      this.base_url +
      this.addnew_trigger_pathname +
      '?' +
      this.addnew_trigger_param_key +
      '=' +
      this.addnew_trigger_param_value +
      '&' +
      this.param_key_store_id +
      '=' +
      e;
    window.open(a, '_blank');
  });
var LadiPageFlowEditor = LadiPageFlowEditor || new LadiPageFlowEditorV2();
LadiPageFlowEditor.init();
var LadiPageChatEditorV2 = LadiPageChatEditorV2 || function () {};
(LadiPageChatEditorV2.prototype.init = function () {
  (this.prefix = 'chat-editor-sdk'),
    (this.id = this.prefix + '-' + Date.now()),
    (this.param_key_store_id = 'store_id');
}),
  (LadiPageChatEditorV2.prototype.editWidget = function (e) {
    var i =
      this.base_url +
      '/intergration#tab=LIVE_CHAT&widgetID={0}&' +
      this.param_key_store_id +
      '={1}';
    (i = i.format(e.ladichat_widget_id, e.ladichat_store_id)),
      window.open(i, '_blank');
  });
var LadiPageChatEditor = LadiPageChatEditor || new LadiPageChatEditorV2();
LadiPageChatEditor.init();
